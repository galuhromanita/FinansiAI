<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="pdf:default-font-family" content="Helvetica" />
    <meta name="pdf:page-margin" content="20mm" />
    <title>Laporan Keuangan Bulanan</title>
    <style>
      body {
        font-family: "Helvetica", Arial, sans-serif;
        background: #f3f3f3;
        display: flex;
        justify-content: center;
        padding: 30px;
      }

      .sheet {
        width: 720px;
        background: #fff;
        border: 1px solid #ccc;
        padding: 25px 35px 30px 35px;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
      }

      /* Header abu-abu */
      .header {
        background: #cfcfcf;
        padding: 14px;
        text-align: center;
        margin-bottom: 18px;
        line-height: 1.4;
      }
      .header .nama {
        font-style: italic;
        font-size: 16px;
        margin: 0;
      }
      .header .judul {
        font-weight: bold;
        font-size: 18px;
        margin: 2px 0;
      }
      .header .periode {
        margin: 0;
        font-size: 14px;
      }

      /* tabel utama */
      table {
        width: 100%;
        border-collapse: collapse;
        font-size: 13.5px;
      }

      th {
        text-align: left;
        font-weight: bold;
        border-bottom: 1px solid #000;
        padding: 6px 4px;
      }

      td {
        padding: 4px 4px;
        vertical-align: top;
      }

      /* kolom */
      .col-left {
        width: 45%;
      }
      .col-mid {
        width: 35%;
        padding-left: 25px;
      }
      .col-right {
        width: 20%;
        text-align: right;
      }

      /* Laba Bersih highlight */
      .laba {
        background: #cfcfcf;
        font-weight: bold;
        padding-top: 5px;
        padding-bottom: 5px;
      }

      /* jarak antar section */
      .spacer td {
        padding: 6px 0;
      }

      /* tombol */
      .export-btn {
        margin-top: 16px;
        text-align: left;
      }

      button {
        background: #007bff;
        border: none;
        color: #fff;
        padding: 6px 14px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 13px;
      }

      button:hover {
        background: #0056b3;
      }
    </style>
  </head>
  <body>
    <div class="sheet">
      <div class="header">
        <p class="nama">"{{ hasil.NamaUsaha }}"</p>
        <p class="judul">LAPORAN KEUANGAN BULANAN</p>
        <p class="periode">
          Untuk Bulan "{{ hasil.Bulan }}" Tahun "{{ hasil.Tahun }}"
        </p>
      </div>

      <table>
        <thead>
          <tr>
            <th class="col-left">Keterangan</th>
            <th class="col-mid"></th>
            <th class="col-right">Jumlah (Rp)</th>
          </tr>
        </thead>
        <tbody>
          <!-- Modal -->
          <tr>
            <td class="col-left">Modal</td>
            <td class="col-mid"></td>
            <td class="col-right">
              <span class="money" data-val="{{ hasil.Modal }}"></span>
            </td>
          </tr>

          <!-- Pendapatan -->
          <tr>
            <td class="col-left">Pendapatan</td>
            <td class="col-mid"></td>
            <td class="col-right">
              <span class="money" data-val="{{ hasil.Pendapatan }}"></span>
            </td>
          </tr>

          <tr class="spacer">
            <td colspan="3"></td>
          </tr>

          <!-- Beban header -->
          <tr>
            <td class="col-left">Beban :</td>
            <td class="col-mid"></td>
            <td class="col-right"></td>
          </tr>

          <!-- Sub-beban rata & sejajar -->
          <tr>
            <td class="col-left"></td>
            <td class="col-mid">Beban Usaha</td>
            <td class="col-right">
              <span class="money" data-val="{{ hasil.BebanUsaha }}"></span>
            </td>
          </tr>
          <tr>
            <td class="col-left"></td>
            <td class="col-mid">Beban Lain-lain</td>
            <td class="col-right">
              <span class="money" data-val="{{ hasil.BebanLain }}"></span>
            </td>
          </tr>
          <tr>
            <td class="col-left"></td>
            <td class="col-mid">Total Beban</td>
            <td class="col-right">
              <span class="money" data-val="{{ hasil.TotalBeban }}"></span>
            </td>
          </tr>

          <tr class="spacer">
            <td colspan="3"></td>
          </tr>

          <!-- Laba Bersih -->
          <tr class="laba">
            <td class="col-left">Laba Bersih</td>
            <td class="col-mid"></td>
            <td class="col-right">
              <span class="money" data-val="{{ hasil.LabaBersih }}"></span>
            </td>
          </tr>
        </tbody>
      </table>

      <div class="export-btn">
  <form action="/export_pdf" method="POST">
    <input type="hidden" name="NamaUsaha" value="{{ hasil.NamaUsaha }}">
    <input type="hidden" name="Bulan" value="{{ hasil.Bulan }}">
    <input type="hidden" name="Tahun" value="{{ hasil.Tahun }}">
    <input type="hidden" name="Modal" value="{{ hasil.Modal }}">
    <input type="hidden" name="Pendapatan" value="{{ hasil.Pendapatan }}">
    <input type="hidden" name="BebanUsaha" value="{{ hasil.BebanUsaha }}">
    <input type="hidden" name="BebanLain" value="{{ hasil.BebanLain }}">
    <input type="hidden" name="TotalBeban" value="{{ hasil.TotalBeban }}">
    <input type="hidden" name="LabaBersih" value="{{ hasil.LabaBersih }}">
    
    <button type="submit">⬇️ Export PDF</button>
  </form>
</div>


    <script>
      // Format angka ke Rp X.XXX.XXX
      function formatRupiah(n) {
        n = Number(n) || 0;
        return "Rp " + n.toLocaleString("id-ID");
      }
      document.querySelectorAll(".money").forEach((el) => {
        el.textContent = formatRupiah(el.getAttribute("data-val"));
      });
    </script>
  </body>
</html>
